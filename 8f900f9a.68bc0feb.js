/*! For license information please see 8f900f9a.68bc0feb.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{107:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),o=n.n(a),c=n(111),i=n(110),l=n.n(i),s=n(98),b=n.n(s);const p=37,u=39;var m=function(e){const{block:t,children:n,defaultValue:r,values:c}=e,[i,s]=Object(a.useState)(r),m=[];return o.a.createElement("div",null,o.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:l()("tabs",{"tabs--block":t})},c.map(({value:e,label:t})=>o.a.createElement("li",{role:"tab",tabIndex:"0","aria-selected":i===e,className:l()("tab-item",b.a.tabItem,{"tab-item--active":i===e}),key:e,ref:e=>m.push(e),onKeyDown:e=>((e,t,n)=>{switch(n.keyCode){case u:((e,t)=>{const n=e.indexOf(t)+1;e[n]?e[n].focus():e[0].focus()})(e,t);break;case p:((e,t)=>{const n=e.indexOf(t)-1;e[n]?e[n].focus():e[e.length-1].focus()})(e,t)}})(m,e.target,e),onFocus:()=>s(e),onClick:()=>s(e)},t))),o.a.createElement("div",{role:"tabpanel",className:"margin-vert--md"},a.Children.toArray(n).filter(e=>e.props.value===i)[0]))};var d=function(e){return o.a.createElement("div",null,e.children)};n.d(t,"frontMatter",(function(){return h})),n.d(t,"metadata",(function(){return f})),n.d(t,"rightToc",(function(){return O})),n.d(t,"default",(function(){return j}));const h={id:"core",title:"Core Package",sidebar_label:"Core",keywords:["InstantHIE","Core","Package"],description:"The core package of the InstantHIE"},f={id:"packages/core",title:"Core Package",description:"The core package of the InstantHIE",source:"@site/docs/packages/core.md",permalink:"/instant/docs/packages/core",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/packages/core.md",sidebar_label:"Core",sidebar:"docs",previous:{title:"How to create an Instant OpenHIE package",permalink:"/instant/docs/concepts/creating-packages"},next:{title:"Health-Workforce",permalink:"/instant/docs/packages/health-workforce"}},O=[{value:"Getting Started",id:"getting-started",children:[]},{value:"Accessing the services",id:"accessing-the-services",children:[]},{value:"Testing the Core package",id:"testing-the-core-package",children:[]}],g={rightToc:O};function j({components:e,...t}){return Object(c.b)("wrapper",Object(r.a)({},g,t,{components:e,mdxType:"MDXLayout"}),Object(c.b)("p",null,"The InstantHIE Core Package is the base of the InstantHIE architecture."),Object(c.b)("p",null,"This package consists of two components:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"Interoperability Layer - ",Object(c.b)("a",Object(r.a)({parentName:"li"},{href:"http://openhim.org/"}),"OpenHIM")),Object(c.b)("li",{parentName:"ul"},"FHIR Server - ",Object(c.b)("a",Object(r.a)({parentName:"li"},{href:"https://hapifhir.io/"}),"HAPI FHIR"))),Object(c.b)("h2",{id:"getting-started"},"Getting Started"),Object(c.b)("p",null,"Select a deployment platform below to follow the getting started steps in setting up this package."),Object(c.b)(m,{defaultValue:"dockerCompose",values:[{label:"Docker Compose",value:"dockerCompose"},{label:"Kubernetes",value:"kubernetes"}],mdxType:"Tabs"},Object(c.b)(d,{value:"dockerCompose",mdxType:"TabItem"},Object(c.b)("p",null,"Before we proceed with creating our Core package components, we need to ensure we are in the correct directory containing our ",Object(c.b)("inlineCode",{parentName:"p"},"docker-compose")," script."),Object(c.b)("p",null,"Once you are in the correct working directory (",Object(c.b)("inlineCode",{parentName:"p"},"core/docker/"),") we can proceed to execute our ",Object(c.b)("inlineCode",{parentName:"p"},"docker-compose")," script by running the below command which will create all the services and print out their logs in the terminal."),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash"}),"docker-compose up\n")),Object(c.b)("h4",{id:"useful-compose-flags"},"Useful compose flags"),Object(c.b)("p",null,"Some additional flags can be passed to the ",Object(c.b)("inlineCode",{parentName:"p"},"docker-compose")," command making it a bit easier to work with."),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"-d"),": Run the services in a detached mode. This means that when you close or exit your terminal, the services will still be running in the background."),Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"-f"),": Specify the location of the ",Object(c.b)("inlineCode",{parentName:"li"},"docker-compose")," file to be executed. Omitting this flag will look for the default ",Object(c.b)("inlineCode",{parentName:"li"},"docker-compose.yml")," file."),Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"--force-recreate"),": This will force the container/image to be re-created if a newer version is found. This is useful when a new image has been released but not yet pulled onto the host machine.")),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash"}),"docker-compose up -d --force-recreate\n")),Object(c.b)("h4",{id:"environment-configuration"},"Environment configuration"),Object(c.b)("p",null,"By running the above command to get started with the Core package we create all the services that need to be defined, but this script might have some limitations depending on the type of environment you want to run the configuration"),Object(c.b)("p",null,"Additional ",Object(c.b)("inlineCode",{parentName:"p"},"docker-compose")," files are available for extra environment configuration"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("strong",{parentName:"li"},"docker-compose.yml"),": Main ",Object(c.b)("inlineCode",{parentName:"li"},"docker-compose")," script to create the services"),Object(c.b)("li",{parentName:"ul"},Object(c.b)("strong",{parentName:"li"},"docker-compose.dev.yml"),": Development ",Object(c.b)("inlineCode",{parentName:"li"},"docker-compose")," script to override some of the default configuration to be used in a development environment (Open service ports for access etc)")),Object(c.b)("p",null,"The below command specifies the three ",Object(c.b)("inlineCode",{parentName:"p"},"docker-compose")," files that need to be executed for the development configuration"),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash"}),"docker-compose -f docker-compose.yml -f docker-compose.dev.yml -f docker-compose.config.yml up -d\n")),Object(c.b)("p",null,"The below command specifies the two ",Object(c.b)("inlineCode",{parentName:"p"},"docker-compose")," files that need to be executed for a production-like configuration"),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash"}),"docker-compose -f docker-compose.yml -f docker-compose.config.yml up -d\n"))),Object(c.b)(d,{value:"kubernetes",mdxType:"TabItem"},Object(c.b)("p",null,"Coming soon..."))),Object(c.b)("h2",{id:"accessing-the-services"},"Accessing the services"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("strong",{parentName:"li"},"OpenHIM"),Object(c.b)("ul",{parentName:"li"},Object(c.b)("li",{parentName:"ul"},"Console: ",Object(c.b)("a",Object(r.a)({parentName:"li"},{href:"http://localhost:9000"}),"http://localhost:9000")),Object(c.b)("li",{parentName:"ul"},"Username: ",Object(c.b)("strong",{parentName:"li"},"root@openhim.org")),Object(c.b)("li",{parentName:"ul"},"Password: ",Object(c.b)("strong",{parentName:"li"},"instant101")))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("strong",{parentName:"li"},"HAPI FHIR"),Object(c.b)("ul",{parentName:"li"},Object(c.b)("li",{parentName:"ul"},"This service should not be publicly accessible and only accessed via the Interoperability Layer")))),Object(c.b)("h2",{id:"testing-the-core-package"},"Testing the Core package"),Object(c.b)("p",null,"As part of the Core package setup we also do some initial importation of config for connecting the services together."),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"OpenHIM: Import a public channel configuration that routes requests to the HAPI FHIR services"),Object(c.b)("li",{parentName:"ul"},"HAPI FHIR: ",Object(c.b)("em",{parentName:"li"},"Not config import yet"))),Object(c.b)("p",null,"For testing this Core package we will be making use of ",Object(c.b)("inlineCode",{parentName:"p"},"curl")," for sending our request, but any client could be used to achieve the same result."),Object(c.b)("p",null,"Execute the below ",Object(c.b)("inlineCode",{parentName:"p"},"curl")," request to successfully route a request through the OpenHIM to query the HAPI FHIR server."),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash"}),"curl http://localhost:5001/hapi-fhir-jpaserver/fhir/Patient\n")))}j.isMDXComponent=!0},110:function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var c=a.apply(null,r);c&&e.push(c)}else if("object"===o)for(var i in r)n.call(r,i)&&r[i]&&e.push(i)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},111:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=a.a.createContext({}),b=function(e){var t=a.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i({},t,{},e)),n},p=function(e){var t=b(e.components);return a.a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=b(n),m=r,d=p["".concat(c,".").concat(m)]||p[m]||u[m]||o;return n?a.a.createElement(d,i({ref:t},s,{components:n})):a.a.createElement(d,i({ref:t},s))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,c=new Array(o);c[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,c[1]=i;for(var s=2;s<o;s++)c[s]=n[s];return a.a.createElement.apply(null,c)}return a.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);